<!DOCTYPE html>
<html>
<head>
    <title>注册</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords"
          content="Internship Sign In & Sign Up Form Responsive Widget,Login form widgets, Sign up Web forms , Login signup Responsive web form,Flat Pricing table,Flat Drop downs,Registration Forms,News letter Forms,Elements"/>
    <script type="application/x-javascript"> addEventListener("load", function () {
        setTimeout(hideURLbar, 0);
    }, false);

    function hideURLbar() {
        window.scrollTo(0, 1);
    } </script>
    <!-- Custom Theme files -->
    <link href="../static/css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all">
    <link href="../static/css/snow.css" rel="stylesheet" type="text/css" media="all"/>
    <link href="../static/css/style.css" rel="stylesheet" type="text/css" media="all"/>
    <!-- //Custom Theme files -->
    <!-- web font -->
    <!--<link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    -->
    <!-- //web font -->
</head>
<body>
<script src="/static/webcam.js"></script>
<script type="text/javascript" src="/static/jquery-3.3.1.min.js"></script>
<script language="JavaScript">
    $(document).ready(function () {
        Webcam.on('error', function (err) {
            alert('来自开发者的提示：\n1、请在右上角打开摄像机权限\n2、或者使用能调用摄像头的浏览器进行注册');
        });
        Webcam.on('live', function () {
            $(".show").css('display', 'block');
        });
        Webcam.set({
            width: 300,
            height: 150
        });
        Webcam.attach('#my_camera');
    });

    function take_snapshot() {
        var pwd1 = $('#pwd1').val();
        if (!!!pwd1) {
            alert('学号不能为空！');
            $('#pwd1').focus();
            return;
        }
        var pwd2 = $('#pwd2').val();
        if (!!!pwd2) {
            alert('学号不能为空！');
            $('#pwd2').focus();
            return;
        }
        if (pwd1 != pwd2) {
            alert('学号不一致！');
            $('#pwd2').focus();
            return;
        }
        Webcam.snap(function (data_uri) {
            var param = {};
            param.img = data_uri.replace(/^data\:image\/\w+\;base64\,/, '');
            param.stu_no = pwd1;
            $.ajax({
                type: "POST",
                url: "/add_face",
                data: param,
                success: function (data) {
                    if (data == "OK") {
                        alert('注册成功！');
                        window.location.href = "/login";
                    } else {
                        alert(data);
                    }
                },
                error: function (data) {
                    {#alert("error");#}
                }
            });
        });
    }
</script>
<div class="snow-container">
    <div class="snow foreground"></div>
    <div class="snow foreground layered"></div>
    <div class="snow middleground"></div>
    <div class="snow middleground layered"></div>
    <div class="snow background"></div>
    <div class="snow background layered"></div>
</div>

<div class="top-buttons-agileinfo show" style="display: none;">
    <a href="/login">登录</a><a href="/add" class="active">注册</a>
</div>
<h1>Internship Sign In & Sign Up Form</h1>
<div class="main-agileits">
    <!--form-stars-here-->
    <div class="form-w3-agile show" id="web-div" style="display: none">
        <h2 class="sub-agileits-w3layouts">Sign Up</h2>
        <form action="#" method="post" onsubmit="return false">
            <span id="my_camera"></span>
            <input type="text" name="Password" placeholder="Student Number" required="" id="pwd1"/>
            <input type="text" name="Password" placeholder="Confirm Student Number" required="" id="pwd2"/>
            <div class="submit-w3l">
                <input type="button" value="Sign up" onclick="take_snapshot()">
            </div>
        </form>
    </div>
</div>
<!--//form-ends-here-->
<!-- copyright -->
<div class="copyright w3-agile show" id="bottom-xupt" style="display: none">
    <p><strong>版权所有：<a href="http://www.xiyou.edu.cn" target="_blank"> 西安邮电大学 </a> </strong>
        2011-2017 中国西安长安南路563号
        陕ICP备040096号</p>
</div>
<!-- //copyright -->


</body>
</html>